\topic{Struktúra alapú modellezés}

\graphicspath{ {./struktura-alapu-modellezes/figures/} }

\newcommand{\yedscale}{0.7}

% vezérpélda lehetőségek
% - táblázatszerű adatok pl. felhasználókról (preferenciák, van-e jogsija, stb.), kocsikról (férőhely, légkondi stb.)
% - kiszolgáló rendszer top-down, bottom-up tervezése (mobil kliens, tömegközl. integráció, adatbázis stb.)
% - gráfként reprezentált fuvarok, kocsik, szakaszok, utasok, sofőrök stb.

%\begin{megjegyzes}
%	kifejteni azt, hogy lehet logikai és fizikai felépítés alapján is modellezni.
%	
%	- Fizikai/architektúrális egységek --> moduláris struktúra hoz létre, újrahasznosítható részekkel.
%	
%	- Funkcionális egységek --> dedikált struktúrát hoz létre, pl. távirányító -- redundanciamentes, azért, hogy a költség alacsony legyen. Nem újrahasznosíthatók a részei.
%	
%	Pl. dedikált eszközt készítünk, amikor van egy rendszermenedzsment problémám és írok rá egy szkriptet. A másik megoldás lenne, hogy behozunk egy rendszermenedzsment eszközt és annak az újrahasznosítható komponenseit alkalmazzuk.
%	
%	Jó lenne építészeti példát behozni.
%\end{megjegyzes}

Hogyan épül fel egy rendszer? Milyen részekre bontható és ezek között milyen kapcsolat van? Ahhoz, hogy a rendszerünkkel kapcsolatos problémákat megválaszoljunk, fontos, hogy ezekre a kérdésekre tudjuk a választ. Ebben a fejezetben az egyes rendszerek \fogalomragozva{struktura}{struktúrájának} jellemzésével foglalkozunk. Bemutatjuk a strukturális modellezés motivációját, a leggyakrabban alkalmazott formalizmusokat és azok matematikai alapjait.

%Modellezés során egy rendszert jellemezhetünk annak statikus, ill. dinamikus jellemzői alapján. A statikus jellemzés esetén a rendszer felépítését, \fogalomragozva{struktura}{struktúráját} írjuk le, míg dinamikus jellemzés esetén a rendszer \fogalomragozva{viselkedes}{viselkedésével} foglalkozunk.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{A struktúramodellezés alkalmazásai}
\label{sec:motivacio}

Mind a természetben előforduló, mind a mesterséges rendszerekben fellelhetők bizonyos szabályszerűségek. Egyes szabályszerűségek a rendszer elemei közötti kapcsolatokat, míg mások magukat az elemeket jellemzik.

\subsection{Hálózatok}
\label{sec:halozatok}

Egy rendszert gyakran úgy jellemezhetünk a legjobban, ha bizonyos elemeit megkülönböztetjük és leírjuk az ezek közötti \fogalomragozva{kapcsolat}{kapcsolatot}.

\begin{pelda}
	Egy nagyváros közlekedési hálózata szövevényes rendszere az út- és sínhálózatnak, a több százezernyi járműnek és az ezeken utazó embereknek. A közlekedők mozgása mellett az infrastruktúra is folyamatosan változik a különböző fejlesztések, átalakítások és karbantartások miatt.
	
	Egy ilyen rendszer precíz modellezése lehetetlen vállalkozás lenne, ezért helyette tipikusan olyan absztrakciókkal dolgozunk, amik az adott probléma megoldásához szükséges információkat tartalmazzák. Például az útvonalkereső alkalmazások ismerik a helyi tömegközlekedés járatait és segítséget nyújtanak abban, hogy az indulási pontunktól a célállomásig közlekedő járműveket és az azok közötti átszállási lehetőségeket listázzák.
	
	Vizsgáljuk meg például Budapest metróhálózatát! Az egyszerűség kedvéért a példában a hálózatnak csak a Nagykörúton belüli részével foglalkozunk.
\end{pelda}

A metróhálózat térképe \aref{fig:budapest-metrohalozat-nagykorut-terkep} ábrán látható. A térképből is látható, hogy a hálózat könnyen ábrázolható egy \fogalomragozva{graf}{gráffal}, ahol a gráf minden \fogalomragozva{csomopont}{csomópontja} egy-egy metróállomásokat jelöl. A csomópontok címkéje a metrómegálló neve. Két csomópont között akkor fut \fogalom{el}, ha a két megálló közvetlenül össze van kötve metróval. A metróhálózatot modellező %\fogalomragozva{iranyitatlan-graf}{irányítatlan}, \fogalomragozva{cimkezett-graf}{címkézett}, \fogalom{egyszeru-graf}
gráf \aref{fig:budapest-metrohalozat-nagykorut-egyszeru}. ábrán látható.

\begin{figure}[H]
	\begin{subfigure}[b]{0.5\textwidth}
		\centering
		\includegraphics[width=0.9\textwidth]{budapest-metrohalozat-nagykorut-terkep}
		\caption{A metróhálózat térképe~\cite{BKK:metro}}
		\label{fig:budapest-metrohalozat-nagykorut-terkep}
	\end{subfigure}
	~
	\begin{subfigure}[b]{0.5\textwidth}
		\includegraphics[width=\textwidth]{budapest-metrohalozat-nagykorut-egyszeru}
		\caption{A metróhálózat egyszerű gráfként ábrázolva}
		\label{fig:budapest-metrohalozat-nagykorut-egyszeru}
	\end{subfigure}
	\caption{Budapest metróhálózata a Nagykörúton belül.}\label{fig:animals}
\end{figure}

A modellünk segítségével választ kaphatunk például a következő kérdésekre:

\begin{enumerate}
	\item Milyen megállók érhetők el a Vörösmarty térről indulva?
	
		Vizsgáljuk meg, hogy a Vörösmarty teret reprezentáló csomópontból kiindulva milyen csomópontok érhetők el. Ehhez elemi bejáróalgoritmusokat használunk, pl. \fogalomragozva{BFS}{szélességi keresést} (\rovidites{BFS}) vagy \fogalomragozva{DFS}{mélységi keresést} (\rovidites{DFS}).
	\item Hány megállót kell utaznunk a Kossuth Lajos tér és a Kálvin tér között?

		A legrövidebb utat \fogalomragozva{BFS}{szélességi kereséssel} határozhatjuk meg.
\end{enumerate}

Vannak azonban olyan metróközlekedéssel kapcsolatos kérdések, amelyekhez a modell nem tartalmaz elég információt:

\begin{enumerate}
	\item Milyen megállók érhetők el a Fővám térről indulva \emph{legfeljebb egy átszállással}?
	\item A menetrend szerint \emph{hány percig tart} az út a Kossuth Lajos tér és az Astoria között?
\end{enumerate}

Ezeknek a kérdéseknek megválaszolásához egészítsük ki a gráfot! Az első kérdéshez szükséges, hogy az egyes metróvonalakat meg tudjuk különböztetni, amit például az élek címkézésével tehetünk meg. \Aref{fig:budapest-metrohalozat-nagykorut-elcimkezett} ábrán színekkel jelöltük a különböző élcímkéket. Induljunk ki a Fővám térről: átszállás nélkül az Astoria és a Rákóczi tér megállókat érhetjük el, míg egy átszállással elérhetjük az M3-as metró vonalán található megállókat is.

\begin{figure}[H]
	\begin{subfigure}[b]{0.5\textwidth}
		\includegraphics[width=\textwidth]{budapest-metrohalozat-nagykorut-elcimkezett}
		\caption{A gráf élcímkékkel kiegészítve.}
		\label{fig:budapest-metrohalozat-nagykorut-elcimkezett}
	\end{subfigure}
	~
	\begin{subfigure}[b]{0.5\textwidth}
		\includegraphics[width=\textwidth]{budapest-metrohalozat-nagykorut-elsulyozott}
		\caption{A gráf élsúlyokkal kiegészítve.}
		\label{fig:budapest-metrohalozat-nagykorut-elsulyozott}
	\end{subfigure}
	\caption{A metróhálózatot ábrázoló gráf kiterjesztései.}\label{fig:animals}
\end{figure}

A második kérdés megválaszolásához az egyes megállók közötti útidőt kell jellemeznünk. Ehhez vegyünk fel \fogalomragozva{elsuly}{élsúlyokat} a gráfba. \Aref{fig:budapest-metrohalozat-nagykorut-elsulyozott} ábrán élsúlyokkal jelöltük az egyes megállók között menetidőt. Ezek ismeretében meghatározható a Kossuth Lajos tér és a Kálvin tér közötti út menetrend szerinti időtartama. Ez a modell arra is alkalmas, hogy meghatározzuk a legrövidebb utat a két csomópont között, például a \fogalom{Dijsktra-algoritmus} segítségével.

\begin{pelda}
	Melyik metróvonalak között tudunk átszállni? A kérdésre választ kaphatunk a fenti modell segítségével. Nagyméretű hálózat esetén azonban már sokáig tarthat a válasz meghatározása, ezért érdemes olyan modellt készíteni, ami a válaszhoz nem szükséges részeket \fogalomragozva{absztrakcio}{absztrahálja}.
\end{pelda}

\remofigscale{metro-atszallas}{Átszállási lehetőségek a metróvonalak között a Nagykörúton belül}{\yedscale}

\Aref{fig:metro-atszallas}. ábrán látható modellből azonnal kiderül, hogy mely metróvonalak között van átszállási lehetőség. A modell segítségével tehát hatékonyabban tudunk válaszolni erre a kérdésre, de a korábbi kérdésekre már nem tudnánk válaszolni ez alapján.

A közlekedési hálózathoz hasonlóan sok rendszer jól modellezhető gráffal: az élőlények táplálkozási lánca, az egyes személyek közösségi hálója, az úthálózat,  telekommunikációs hálózatok stb.
	
\subsection{Hierarchikus rendszerek}
\label{sec:hierarhcikus-rendszerek}

\begin{pelda}
	Budapestnek 23 kerülete van, amelyek további városrészekből állnak. %\footnote{\url{https://hu.wikipedia.org/wiki/Budapest_v\%C3\%A1rosr\%C3\%A9szeinek_list\%C3\%A1ja}} A metróhálózat megálló különböző városrészekben találhatók. 
	Melyik városrészben van az Opera metrómegállója? Melyik városrészben van a legtöbb metrómegálló? Ezekhez hasonló kérdésekre úgy tudunk hatékonyan válaszolni, ha készítünk egy \fogalomragozva{hierarchikus-modell}{hierarchikus modellt} a problémáról.
\end{pelda}

\remofigscale{budapest-keruletek-varosreszek-metromegallok}{Budapest kerületei, városrészei és metrómegállói (részleges modell)}{0.5}

Készítsünk modellt, amely ábrázolja Budapest, a kerületek, a városrészek és a metrómegállók viszonyát! \Az+\refstruc{fig:budapest-keruletek-varosreszek-metromegallok} modellje négy szintet tartalmaz:

\begin{enumerate}
	\item A hierarchia legfelső szintjén Budapest szerepel.
	\item A második szinten a város kerületei találhatók.
	\item A harmadik szinten az egyes városrészek vannak.
	\item A negyedik szinten a metrómegállók találhatók.
\end{enumerate}

Látható, hogy a hierarchikus modellt is ábrázolhatjuk gráfként. A csomópontok a modell különböző szintű elemeit reprezentálják, míg az élek a \fogalomragozva{tartalmazas}{része} viszonyt fejezik ki, például az Opera megálló a VI.~kerület része. A gráf \fogalomragozva{gyoker-csomopont}{gyökér csomópontja} a hierarchiában legmagasabban szereplő elem, Budapest.

Amennyiben egy rendszert hierarchikusan részekre bontunk, nem fordulhat elő, hogy egy elem tartalmazza a szülő elemét, ezért a hierarchikus modelleket reprezentáló gráfok körmentesek. A gyökér elemet leszámítva minden elemnek van szülője, tehát a gráf összefüggő is, így a hierarchikus modellek \fogalomragozva{fa-graf}{fa gráffal} ábrázolhatók.

\begin{megjegyzes}
	A fa struktúrában a gráf élei \emph{implicit módon} jelölik a tartalmazási hierarchiát.
	
	A tartalmazási hierarchia ábrázolható a bennfoglalási viszonyok \emph{explicit megjelenítésével} is. Ebben az esetben egy olyan diagramot rajzolunk, amelyben az egyes téglalapok közötti tartalmazás reprezentálja a modellben szereplő tartalmazási viszonyt.
	
	\begin{center}
		\includegraphics[scale=0.45]{budapest-explicit-tartalmazas}
	\end{center}
	
	\added[id=szarnyas]{Ide be is tehetünk egy (kerületeket tartalmazó térképet), az jobb példa az explicit ábrázolásra.}
\end{megjegyzes}

Láthattuk tehát, hogy mind a modellelemek közötti kapcsolat, mind a modellhierarchia hatékonyan ábrázolható gráfként. \Aref{fig:budapest-metrohalozat-hierarchiaval}. ábrán látható modell \aref{fig:budapest-metrohalozat-nagykorut-elcimkezett} és a \ref{fig:budapest-keruletek-varosreszek-metromegallok}. ábrákon található metróhálózatot és a területek hierarchiáját is tartalmazza.

\remofigscale{budapest-metrohalozat-hierarchiaval}{Budapest metróhálózata és a városrészek, kerületek hierarchiája}{\yedscale}

\subsection{Tulajdonságok}
\label{sec:tulajdonsagok}

\begin{pelda}
A közlekedési vállalat üzemen kívüli járművei járműtelepeken parkolnak és itt végzik rajtuk a szükséges karbantartásokat. A metrók és a villamosok járműtelepe a kocsiszín, a buszoké az autóbuszgarázs.

Mennyi üzemanyag raktározható a legnagyobb autóbusz garázsban? Milyen garázsok vannak a XI. kerületben? Ezek a kérdések a modellünk elemeinek tulajdonságaival kapcsolatban merülnek fel. Építsünk modellt a problémára!
\end{pelda}

A garázsokat például az alábbi modellel írhatjuk le:

\begin{table}[H]
	\centering
	\begin{tabular}{llrrrr}
		\toprule
		helyszín    & típus           & kapacitás & sínpárok száma & max. üzemanyag \\ \midrule
		Fehér út    & kocsiszín & xx & yy & & \\
		Kelenföld   & autóbuszgarázs  &       100 &          &       x millió \\
		Budafok     & kocsiszín           &        50 &        5 &  \\
		Cinkota     & autóbuszgarázs      &       100 &          &       y millió \\
		%	Zách utca & trolibusz-telep & ..      &        yy & 
		\bottomrule
	\end{tabular}
	\caption{A BKK járműtelepei (részleges modell).}
\end{table}

A modellünk elemei a táblázat sorai. A táblázat fejlécében definiált \fogalomragozva{tulajdonsag}{tulajdonságokból} (pl. helyszín, sínpárok száma) az egyes modellelemek eltérő értékeket vehetnek fel. Látható, hogy a táblázatnak nem minden celláját töltöttük ki, mivel az egyes jellemzők nincsenek mindenhol értelmezve.

Megfigyelhetjük azonban, hogy az azonos \fogalomragozva{tipus}{típussal} rendelkező modellelemek azonos tulajdonságokra vesznek fel értéket.
Ez alapján megépíthetjük a problémához tartozó \fogalomragozva{tipushierarchia}{típushierarchiát}: minden \textsf{járműtelep} típusú elemre értelmezzük a helyszín és a kapacitás fogalmakat. Az \textsf{autóbuszgarázs} és a \textsf{kocsiszín} a \textsf{járműtelep} különböző típusai esetei. Az \textsf{autóbuszgarázs} esetén a max. üzemanyagot, a \textsf{kocsiszín} esetében a sínpárok számát rögzítjük.

\subsection{Összetett modell}

\begin{pelda}
	A korábbi metróhálózatot szeretnénk kiegészíteni a villamos- és buszhálózatra vonatkozó információval. Szeretnénk tárolni azt is, hogy az egyes vonalakon közlekedő járművek melyik járműtelepen parkolnak.
\end{pelda}

\added[id=szarnyas]{Itt részletesen végig kellene vinni a példánymodell és a hozzá típusgráf tartozó kidolgozását. Előtte kérek egy sanity checket.}

\remofigscale{jarmutelepek}{Típusgráf}{\yedscale}

\Aref{fig:jarmutelepek}. ábra bemutatja a problémához tartozó típusgráfot. A modellen több fontos dolog is megfigyelhető:

\begin{itemize}
	\item A típushierarchia maga is egy hierarchikus modell.
	\item Több olyan fogalom is van, aminek nincs példánya, csak a leszármazottjainak. Például a modellünkben minden vonal vagy villamosvonal vagy metróvonal. A \textsf{vonal} fogalom így \fogalom{absztrakt}.
	\item A tulajdonságokat nem ábrázoltuk az ábrán. Erre ugyanis a gráf jellegű megjelenítés kevésbé alkalmas.
\end{itemize}


%\begin{megjegyzes}
%A Zách utcai trolitelepen buszokat és trolikat is tárolnak. Alakítsuk át a modellt úgy, hogy ezt is tudja modellezni. % http://www.bkk.hu/2013/09/villamosnap-budafokon-es-nyilt-nap-a-trolitelepen/
%\end{megjegyzes}

%\begin{pelda}
%	Melyik a legnagyobb teljesítményű jármű? Milyen jellemzőket kell rögzíteni egy újonnan beszerzett buszról? Ezek a kérdések a modellünk elemeinek tulajdonságaival kapcsolatban merülnek fel.
%\end{pelda}
%
%Készítsünk egy modellt, ami a különböző járműveket tartalmazza. Ezt a modellt gráf helyett inkább táblázatos formában érdemes ábrázolni, így jobban áttekinthető lesz.
%
%\begin{table}[H]
%	\centering
%	\begin{tabular}{|l|l|l|l|l|r|l|l|}
%		\hline
%		név                   & típus    & tömeg & hossz & lökettérfogat & \#motorok & telj. & nyomtáv \\ \hline\hline
%		Volvo 7700            & busz     & 18 t  & 12 m  & 9000 cm$^3$   &               & 320 LE       &         \\ \hline
%		Siemens Combino Supra & villamos & 70 t  & 54 m  &               & 8             & 800 kW       & 1800 mm \\ \hline
%		XY & villamos & a t  & b m  &               & 8             & yy kW       & 1800 mm \\ \hline
%		Alstom Metropolis     & metró    &       &       &               &               &              & 1435 mm \\ \hline
%	\end{tabular}
%	\caption{Járművek tulajdonságai.}
%	\label{tab:jarmuvek}
%\end{table}
%
%A modellünk elemei itt a táblázat sorai. A modellelemek tulajdonságait \fogalomragozva{jellemzo}{jellemzőkkel} vagy más néven \fogalomragozva{attributum}{attribútumokkal} írjuk le. Mint \aref{tab:jarmuvek}. táblázatban látható, különböző modellelemekre az egyes jellemzők más-más értéket vehetnek fel. Látható, hogy a táblázatnak nem minden celláját töltöttük ki, mivel az egyes jellemzők nincsenek mindenhol értelmezve. Ezeket a cellákat gyakran az \rovidites{NA} (\roviditesangolul{NA}) rövidítéssel vagy \textsf{null} értékkel jellemezzük. Megfigyelhetjük azonban, hogy az azonos \fogalomragozva{tipus}{típussal} rendelkező modellelemek azonos tulajdonságokra vesznek fel értéket.

%A jellemzők nem is feltétlenül értelmezettek minden modellelemre (ún. \fogalomragozva{parcialis-fuggveny}{parciális függvényként} írhatóak le a matematika nyelvén).


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{A struktúramodellezés elmélete}

%Ahogy \az+\refstruc{sec:motivacio} 

Ahogy az eddigi példákban láttuk, a struktúramodellezés célja, hogy a rendszer felépítését jellemezze, beleértve az egyes elemek típusát, a közöttük lévő kapcsolatokat és hierarchiát, valamint az elemek tulajdonságait. Egy rendszer strukturális modellje tehát alkalmas arra, hogy az alábbi kérdésekre (nem feltétlenül kimerítő) választ nyújtson:

\begin{itemize}
	\item Milyen elemekből áll a rendszer?
	\item Hogyan kapcsolódnak egymáshoz az elemek?
	\item Milyen hierarchia szerint épül fel a rendszer?
	\item Milyen tulajdonságúak a rendszer elemei?
\end{itemize}

%A strukturális modell elkészítéséhez jellemeznünk kell a rendszerünk elemeinek aspektusait: a típusukat, az elemek közötti hierarchiát és kapcsolatokat, valamint az elemek jellemzőit.

A strukturális modellre az alábbi tömör definíciót adhatjuk.

\begin{definicio}
	A \fogalom{strukturalis-modell} a rendszer felépítésére (\fogalomragozva{struktura}{struktúrájára}) vonatkozó tudás.
\end{definicio}

%A jellemzők között gyakran kitüntetünk egyet, a típust. Azonos típussal rendelkező modellelemek közös tulajdonságokkal bírnak.

A következőkben a korábbi példákra építve bemutatjuk a struktúramodellezés elméleti hátterét és precízen definiáljuk a szükséges fogalmakat.

\begin{kisdefinicio}
	A definíciók támaszkodnak a gráfelmélet alapjaira, ezért röviden összefoglaljuk a felhasznált definíciókat.
	
	A \fogalom{graf} egy olyan $G = (V, E)$ struktúra, ahol $V$ halmaz a csomópontok, $E$ az élek halmaza. Az élek csomópontok között futnak, \fogalom{iranyitatlan-graf} esetén az $E$ halmaz csomópontok rendezetlen $\{v_1, v_2\}$ párjaiból áll (tehát nem különböztetjük meg a $\{v_1, v_2\}$ és a $\{v_2, v_1\}$) párokat, míg \fogalom{iranyitott-graf} esetén csomópontok rendezett $(v_1, v_2)$ párjaiból.
	% Egy gráf \fogalomragozva{egyszeru-graf}{egyszerű}, ha nem tartalmaz többszörös és hurokélet.

	\fogalomragozva{cimkezett-graf}{Címkézett gráf} esetén a gráf elemeit (csomópontjait és/vagy éleit) \fogalomragozva{cimke}{címkékkel} láthatjuk el. A címkézés célja lehet \fogalom{egyedi-azonosito} hozzárendelése vagy bizonyos tulajdonság leírása (pl. a csomópontok kapacitása, élek típusa). Ha precízen szeretnénk jellemezni a gráfot, a következő terminológiát használhatjuk: ha csak a csomópontokhoz rendelünk címkéket, \fogalomragozva{csucscimkezett-graf}{csúcscímkézett} gráfról beszélünk, míg ha csak a gráf éleihez rendelünk címkéket, \fogalomragozva{elcimkezett-graf}{élcímkézett} gráfról beszélünk. 
	
	A \fogalom{sulyozott-graf} olyan $(G, w)$ pár, ahol $G = (V, E)$ gráf, $w: E \rightarrow \mathbb{R}$ egy súlyfüggvény.
\end{kisdefinicio}

\subsection{Típusok}

Láthattuk, hogy a típusok meghatározzák, hogy az egyes modellelemek milyen kapcsolatban lehetnek egymással és milyen tulajdonságokkal jellemezhetjük őket.

\begin{definicio}
	A \fogalom{tipus} egy kitüntetett jellemző, amely tipikusan állandó egy modellelem életciklusa során. A többi jellemzőt \fogalomragozva{tulajdonsag}{tulajdonságnak} hívjuk.
\end{definicio}

\begin{megjegyzes}
	Jelen anyagban az egyszerűség kedvéért feltételezzük, hogy a modellelemeknek pontosan egy típusa van.
\end{megjegyzes}





\begin{definicio}
	A \fogalom{tipusgraf} egy olyan gráf, amelyben minden csomóponttípushoz egy típuscsomópont, minden éltípushoz egy típusél tartozik.
\end{definicio}

A típusgráfban tehát a csomópontok olyan típusokat jelölnek, amit a példánygráfban csomópont vehet fel ..., az ezek között futó élek pedig olyan típusokat, amiket a példánygráfban (adott típusú csomópontok között futó élek) vehetnek fel. 

A típusgráf egy rendszer \fogalomragozva{metamodell}{metamodelljének} típusait és kapcsolatait ábrázolja.

A típusgráfot és példánygráfot egy gráfon ábrázolva a típus-példány viszonyok is megjeleníthetők: a példánygráf csomópontjaiból a típusgráf csomópontjaira \fogalomangolul{peldanya} (\fogalom{peldanya}) élek mutatnak. Szintén \fogalomangolul{peldanya} viszony áll fenn a példánygráf élei és a típusgráf élei között -- ennek ábrázolása azonban gráfként nehézkes.

Az \fogalom{peldanya} viszony helyett gyakran annak inverzét, a \fogalom{tipusa} (\fogalomangolul{tipusa}) viszonyt. Gráfban ábrázolva az \fogalom{peldanya} és \fogalom{tipusa} élek adott csomópontok között egymással ellentétes irányúak: 

\subsection{Hierarchia}

Egy rendszer strukturális modellje a rendszer dekompozíciójával állítható elő.

\begin{definicio}
	A \fogalom{dekompozicio} (\fogalom{faktoring}) egy összetett probléma vagy rendszer kisebb részekre bontása, amelyek könnyebben érthetők, fejleszthetők és karbantarthatók.
\end{definicio}

A rendszer így kapott egyes komponensei (részrendszerei) gyakran további dekompozícióval még kisebb részekre bonthatóak. Természetesen a dekompozíció során ügyelnünk kell arra, hogy az egyes részekből visszaállítható legyen az eredeti rendszer, különben a kapott strukturális modellünk hiányos.

\begin{definicio}
	Egy dekompozíció \fogalomragozva{helyes-dekompozicio}{helyes}, ha a dekompozícióval kapott rendszer minden elemének megfeleltethető az eredeti rendszer valamelyik eleme, és az eredeti rendszer minden eleméhez hozzárendelhető a dekompozícióval kapott rendszer egy vagy több eleme.
\end{definicio}

%\subsubsection{Hierarchia modellezése}






A hierarchikus modellek körmentes gráfot alkotnak.

\begin{kisdefinicio}
	A \fogalom{seta} szomszédos csúcsok és élek váltakozó sorozata, mely csúccsal kezdődik és csúcsban végződik. %Ha egy séta során egy gráfelemet sem érintünk többször, útról beszélünk, tehát
	Az \fogalom{ut} olyan séta, amely nem metszi önmagát, valamint első és utolsó csúcsa különbözik. A \fogalom{kor} olyan séta, amely nem metszi önmagát, valamint első és utolsó csúcsa megegyezik. %Körről beszélünk, ha egy út során ugyanoda érünk vissza, ahonnan elindultunk.	
	%Ezek ismeretében már beszélhetünk körmentes gráfokról.
	A körmentes, összefüggő gráfokat \fogalomragozva{fa-graf}{fának} nevezzük. (A körmentes gráfokat \fogalomragozva{erdo}{erdőnek} nevezzük.)
	A fák esetén gyakran kiemelt szerepet tulajdonítunk egy csomópontnak: a \fogalom{gyoker-csomopont} a fa egy megkülönböztetett csomópontja. A \fogalom{gyokeres-fa} olyan fa, ami rendelkezik gyökér csomóponttal. \Fogalom{gyokeres-szintezett-fa} esetén a fa csomópontjaihoz hozzárendeljük a gyökértől vett távolságukat is.

	A strukturális modellezés szempontjából kiemelt szerepet játszanak az irányított körmentes gráfok.
	Egy gráf \rovidites{DAG} (\roviditesangolul{DAG}), ha nem tartalmaz irányított kört.	
\end{kisdefinicio}




\subsection{Jellemzők}

A tulajdonságokat gyakran ábrázoljuk táblázatos formában, ún. \fogalomragozva{relacio}{relációkban}. A reláció pontos halmazelméleti definíciójával és a relációkon értelmezett műveleteket definiáló \fogalomragozva{relacioalgebra}{relációalgebrával} bővebben az \adatb tárgy foglalkozik. Most egy egyszerűbb, kevésbé formális definíció alkalmazunk:

\begin{definicio}
A \fogalom{relacio} a modellelemeket és azok jellemzőit tárolja. A reláció egy eleme a modell egy elemének, egy attribútum egy jellemzőjének felel meg. A relációkat gyakran táblázatos formában ábrázoljuk.
\end{definicio}










%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\section{Nézetek}

A struktúramodellekből különböző \fogalomragozva{nezet}{nézeteket} állíthatunk elő.

A leggyakrabban használt műveletek a \fogalom{szures} és a \fogalom{vetites}.

\paragraph{Szűrt nézet}

\begin{definicio}
	\Fogalom{szures} során egy feltétel mentén bizonyos sorokat elhagyunk a relációból. \todo{formalisan is irjuk le}
\end{definicio}

\begin{megjegyzes}
	A relációalgebrában a \fogalom{szures} művelet neve \fogalom{szelekcio}.
\end{megjegyzes}


\paragraph{Vetített nézet}

\begin{definicio}
	\Fogalom{vetites} során a modell egyes jellemzőit elhagyjuk a relációból. Fontos, hogy az esetleg létrejövő üres sorokat is elhagyjuk. \todo{formalisan is irjuk le: lehet olyan vetites is, ahol nem hagyunk el jellemzoket}
\end{definicio}

\begin{megjegyzes}
	A relációalgebrában a \fogalom{vetites} művelet neve \fogalom{projekcio}.
\end{megjegyzes}


\section{Struktúramodellezési technikák}


Fontos gondolat: a struktúramodellezésnek többféle célja lehet.


\begin{itemize}
	\item Készítsünk egy adatmodellt a rendszerünkhöz, pl. egy pizzarendelő oldalon elkészítjük az adatbázis modelljét. Ezután az adatbázis a felhasználói interakcióknak megfelelően változik. Ez a modell ,,típusgráf'' része.
	
	\item Készítsünk a problémából egy modellt, amiből bizonyos kérdésekre választ kaphatunk. Például az alaprajzával modellezzünk egy épületet és nézzük meg, hogy bizonyos tűzvédelmi szempontoknak megfelel-e. Ez a modell ,,példánygráf'' része.
\end{itemize}




\subsection{Hierarchia modellezése}

A gyakorlatban a hierarchia modellezésére két fő megközelítést szoktak alkalmazni: a \fogalomangolul{top-down} és a \fogalomangolul{bottom-up} modellezést.

\begin{definicio}
	\Fogalomangolul{top-down} modellezés során a rendszert felülről lefelé építjük. A modellezés alaplépése a \fogalom{dekompozicio}.
\end{definicio}

A top-down modellezés jellemzői:

\begin{itemize}
	\item[$\oplus$] Részrendszer tervezésekor a szerepe már ismert
	\item[$\ominus$] ,,Félidőben'' még nincsenek működő részek
	\item[$\ominus$] Részek problémái, igényei későn derülnek ki
\end{itemize}

\begin{definicio}
	\Fogalomangolul{bottom-up} modellezés során a rendszert alulról felfelé építjük. A modellezés alaplépése a \fogalom{kompozicio}: az egész rendszer összeszerkesztése külön modellezett vagy fejlesztett részrendszerekből.
\end{definicio}

A bottom-up modellezés jellemzői:

\begin{itemize}
	\item[$\oplus$] A rendszer részei önmagukban kipróbálhatók, tesztelhetők
	\item[$\oplus$] Részleges készültségnél könnyebben előállítható a rendszer prototípusa
	\item[$\ominus$] Nem látszik előre a rész szerepe az egészben
\end{itemize}


\subsection{Metamodellezés}

Adott terület szakértője (ún. \emph{domain expert}) segítségével 

Ontológia készítése, ...



\subsubsection{Taxonómia és ontológia}

\begin{definicio}
	A \fogalom{taxonomia} ...
\end{definicio}

Az ontológia kifejezésre sok különböző definíció létezik. Az informatikában általában az alábbihoz hasonló módon definiálják:

\begin{definicio}
	Az \fogalom{ontologia} egy olyan \fogalom{taxonomia}, amely tartalmazza a benne szereplő fogalmak közötti viszonyokat. 
\end{definicio}

\todo{RDF}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Az objektum-orientált modell}

\Fogalom{objektum-orientalt} modellezés során a világot úgy modellezzük, hogy a modellünk elemei \fogalomragozva{objektum}{objektumok}, amelyek \fogalomragozva{attributum}{attribútumokkal} rendelkeznek egymással különböző kapcsolatokat (\fogalomragozva{asszociacio}{asszociációk}) vehetnek fel. Az objektumok típusát az \fogalomragozva{osztaly}{osztályuk} határozza meg.

Az objektum-orientált modell ereje abban rejlik, hogy képes a típusok, a hierarchia, a kapcsolatok és az attribútumok precíz ábrázolására.


\begin{megjegyzes}
	Az \roviditesmagyarul{OOP} (\rovidites{OOP}) foglalkozik az egyes osztályokon végzett műveletekkel \fogalomragozva{metodus}{metódusaival}, ill. az egyes metódusok és \fogalomragozva{mezo}{mezők} láthatóságával is.
	
	A \fogalom{tobbszoros-orokles} több felveti a \fogalom{gyemant-problema}
	
	Ezekről bővebben a \progketto, a \progharom és a \szofttech tárgyakban esik szó.
	
	
\end{megjegyzes}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\section{Összefoglalás}

A fejezetben bemutattuk \fogalom{struktura-alapu-modellezes} motivációját, a használt formalizmusukat és azok alkalmazásait. Ismertettük \fogalomragozva{tipus}{típusok} fontosságát és a típusrendszer ábrázolásának lehetőségeit.

A következő fejezetekben a \fogalomragozva{viselkedes-alapu-modellezes}{viselkedés alapú modellezést} és annak formalizmusait mutatjuk be.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Gyakorlati alkalmazások (kieg.)}

Az alábbiakban bemutatunk néhány, a strukturális modellezés témaköréhez kapcsolódó gyakorlati technológiát, specifikációt és eszközt. Az itt felsorolt fogalmak nem részei a számonkérésnek, gyakran előkerülnek viszont a későbbi tanulmányok és munkák során, ezért mindenképpen érdemes legalább névről ismerni őket.

\subsection{Modellezési nyelvek}

A gyakorlatban sokféle modellezési nyelvet használnak, ezek közül mutatunk be most néhány elterjedtebbet.

\subsubsection{UML}

Az \roviditesangolulkifejtve{UML} egy általános célú modellezési nyelv az~\cite{UML}. Az UML három fő diagramtípust definiál:

\begin{itemize}
	\item \emph{Structure Diagram:} strukturális modellek leírására. A \emph{Class Diagram} az osztályok (metamodell), míg az \emph{Object diagram} a példányok (modell) leírására alkalmas. A \emph{Composite Structure Diagram} egy rendszer struktúráját és a rendszer komponenseinek kapcsolatát mutatja be.
	\item \emph{Behaviour Diagram:} viselkedési modellek leírására, pl. a \emph{State Machine Diagram} segítségével állapotgépek az \emph{Activity Diagramon} folyamatok ábrázolhatók. A \emph{Behaviour Diagramek} között megkülönböztejük az \emph{Interaction Diagrameket}. Ezeknek szintén a viselkedés leírása a célja, de a hangsúly a vezérlés- és adatáramlás bemutatásán van. Ilyen pl. a \emph{Sequence Diagram} (szekvenciadiagram), amely az egyes objektumok közötti interakciót mutatja be üzenetek formájában.
\end{itemize}

\remofigscale{UML-diagram}{UML diagramok típusai és a közöttük lévő viszony osztálydiagramként ábrázolva~\cite{wiki:ISE}}{0.6}

Az UML nyelvvel részletesen foglalkozik a \szofttech tárgy.

\subsubsection{AADL}

Az \roviditesangolulkifejtve{AADL} eredetileg repülőipari célokra fejlesztett architektúraleíró nyelv~\cite{AADL}.

\subsubsection{SysML}

A \roviditesangolulkifejtve{SysML} egy UML-alapú általános modellezési nyelv rendszertervezési célokra~\cite{SysML}. A SysML az UML egy részhalmazát bővíti ki és új diagramtípusokat is bevezet, pl. \emph{Requirement Diagram} követelmények és viszonyaik ábrázolására alkalmas.

\subsubsection{EMF}

Az Eclipse fejlesztőkörnyezet~\cite{eclipse} saját modellezési keretrendszerrel rendelkezik, ez az \roviditesangolulkifejtve{EMF}. Az EMF metamodellező nyelve, az Ecore lehetővé teszi saját, ún. \roviditesteljesenkifejtve{DSL} definiálását. Az EMF mára több területen is \emph{de facto} modellezési keretrendszer, sikere nagyban hozzájárul az Eclipse népszerűségéhez.

Az Eclipse-szel és az EMF-fel foglalkozik az \eat szabadon választható tárgy.

\subsubsection{RDF}

\roviditesangolulkifejtve{RDF}

TODO erről is lesz szakirányos tárgy

\subsubsection{AUTOSAR}

Az \roviditesangolulkifejtve{AUTOSAR}~\cite{autosar} nagy autóipari gyártók és beszállítóik által fejlesztett szabványos architektúranyelv, amely az egyes hardver- és szoftverkomponensek együttműködése magas szinten definiálható. Az AUTOSAR konzorciumnak a \emph{Méréstechnika és Információs Rendszerek Tanszék} is tagja~\cite{autosar-attendees}.

\subsection{Struktúramodellezési technikák}

A struktúramodellek definiálására és fejlesztésére különböző technikák léteznek. A ... említettük a top-down és a bottom up tervezés. Itt két további, általánosan alkalmazható technikát mutatunk be.

\subsubsection{Tervezési mintáklatex }

Az \fogalom{objektum-orientalt} tervezés során gyakran előforduló problémákra különböző \fogalomragozva{tervezesi-minta}{tervezési minták} (\fogalomragozva{tervezesi-minta}{design patterns}) léteznek. A tervezési minták között külön szerepet kapnak a rendszer struktúráját leíró \fogalomragozva{szerkezeti-minta}{szerkezeti minták} (\fogalomragozva{szerkezeti-minta}{structural patterns}). A tervezési mintákkal bővebben a \sznikak tárgy foglalkozik.

\subsubsection{Refaktoring}

A \fogalomragozva{dekompozicio}{dekompozícióhoz}, azaz \fogalomragozva{faktoring}{faktoringhoz} szorosan kapcsolódik a \fogalom{refaktoring} (\fogalomangolul{refaktoring}) fogalma~\cite{fowler2012refactoring}. Refaktoring során létező rendszereket definiáló programkódok vagy modellek átalakítását értjük. A refaktoring lényege, hogy az átalakítás során a rendszer megfigyelhető működése változatlan marad, de a kapott programkód vagy modell érthetőbb, karbantarthatóbb lesz.

\subsection{Struktúramodellező eszközök és vizualizáció}

Gráfok automatikus megjelenítésére alkalmas pl. a GraphViz\footnote{\url{http://www.graphviz.org/}} programcsomag. Gráfok feldolgozására gyakran alkalmazzák az igraph\footnote{\url{http://igraph.org/}} programcsomagot. Manapság több gráfadatbázis-kezelő rendszer is elterjedt, pl. a Neo4j\footnote{\url{http://neo4j.com/}} és a Titan\footnote{\url{http://thinkaurelius.github.io/titan/}} rendszerek.

Gráfok manuális rajzolására szintén több eszköz elterjedt. Egyszerűen használható online felületet biztosít a draw.io\footnote{\url{http://draw.io/}} és az Arrow Tools\footnote{\url{http://www.apcjones.com/arrows/}}. Összetettebb ábrákhoz a yEd\footnote{\url{https://www.yworks.com/products/yed}} eszközt érdemes használni. Sok információt tartalmazó gráf esetén érdemes lehet vektorgrafikus rajzoló-, ill. prezentáló eszközök, pl. a Microsoft Visio vagy Microsoft PowerPoint alkalmazás.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Elméleti kitekintés (kieg.)}

A struktúramodellezésnek komoly matematikai eszköztára is van. Az alábbiakban ezekből mutatunk be néhány részletet.

\subsection{Hipergráfok}

A gráf adatmodell kiterjesztése a \fogalom{hipergraf}. A hipergráfban a \fogalomragozva{hiperel}{hiperélek} több csomópont között is futhatnak. Megkülönböztetünk irányított és irányítatlan hipergráfokat.

Az irányítatlan hipergráfok egyszerűen leképezhetők \fogalomragozva{paros-graf}{páros gráffá}: a gráf egyik halmazában a hipergráf csomópontjainak, a másik halmazában a hiperéleknek veszünk fel egy pontot.

\fogalom{kenyszer} + \rovidites{CSP}

\todo[inline]{ábra}

\subsection{Bináris relációk tulajdonságai}

A \fogalom{tranzitiv-lezaras} fogalom jelentésének megértését segíti, ha ismerjük a kétváltozós relációkon értelmezett tulajdonságokat~\cite{wiki:relacio}.

\begin{tipp}
	Az elnevezések egyezése nem véletlen, a \fogalom{ketvaltozos-relacio} egy alesete a \fogalom{relacio} fogalomnak.
\end{tipp}

%http://math.stackexchange.com/questions/65102/if-a-relation-is-symmetric-and-transitive-will-it-be-reflexive

\begin{definicio}
	Egy $S$ halmazon értelmezett $r$ kétváltozós reláció \fogalomragozva{reflexivitas}{reflexív}, ha bármely $a \in S$-re $r(a, a)$ teljesül.
\end{definicio}

\begin{definicio}
	Egy $S$ halmazon értelmezett $r$ kétváltozós reláció \fogalomragozva{szimmetria}{szimmetrikus}, ha bármely $a,b \in S$-re $r(a, b)$ teljesülése esetén $r(b, a)$ is teljesül. A nem szimmetrikus relációkat \fogalomragozva{aszimmetria}{aszimmetrikusnak} nevezzük.
\end{definicio}

\begin{definicio}
	Egy $S$ halmazon értelmezett $r$ kétváltozós reláció \fogalomragozva{tranzitivitas}{tranzititív}, ha bármely $a,b,c \in S$-re $r(a, b)$ és $r(b, c)$ teljesülése esetén $r(a, c)$ is teljesül.
\end{definicio}

\begin{pelda}
	\remofigscaleframed{tranzitivitas}{Az \emph{egyenlő} ($=$) és a \emph{kisebb} ($<$) relációk gráfon ábrázolva}{\yedscale}

	Tranzitív relációk:
	\begin{itemize}
	\item Az \emph{egyenlő} ($=$) és a \emph{kisebb} ($<$) relációk tranzitívak, mert
	\begin{itemize}
		\item $a = b$ és $b = c$ esetén $a = c$,
		\item $d < e$ és $e < f$ esetén $e < f$.
	\end{itemize}
	\Az+\ref{fig:tranzitivitas}. ábrán ábrázoltuk a fenti relációkat. Az $=$ reláció szimmetrikus, ezért irányítatlan gráffal, a $<$ reláció aszimmetrikus, ezért irányított gráffal reprezentálható.
	\end{itemize}
	
	Nem tranzitív relációk:
	\begin{itemize}
	\item A \emph{nemegyenlő} reláció ($\neq$) nem tranzitív, mert 
	\begin{itemize}
		\item $a \neq b$ és $b \neq c$ esetén $a \neq c$ nem mindig áll fenn, például
		\item $1 \neq 2$ és $2 \neq 1$ esetén $1 \neq 1$ nem teljesül.
	\end{itemize}
	\item Személyek közötti $\mathit{őse}$ reláció tranzitív, mert $\mathit{őse}(a, b)$ és $\mathit{őse}(b, c)$ esetén $\mathit{őse}(a, c)$ is fennáll. 
	\item Személyek közötti $\mathit{ismerőse}$ reláció nem tranzitív, mert $\mathit{ismerőse}(a, b)$ és $\mathit{ismerőse}(b, c)$ esetén nem garantált, hogy $\mathit{ismerőse}(a, c)$ fennáll.
	\end{itemize}
\end{pelda}


A Rendszermodellezés tárgynak nem témája, de érdemes megismerni a relációk további tulajdonságait: \fogalom{reflexivitas}, \fogalom{szimmetria} stb.~\cite{wiki:relacio}. 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Ajánlott irodalom}

A gráfelmélettel behatóan foglalkozik a \bszketto tantárgy és Fleiner Tamás jegyzete~\cite{FleinerJegyzet}. Különböző gráfalgoritmusokat mutat be -- pl. \fogalom{legrovidebb-ut} és minimális összsúlyú \fogalom{feszitofa} keresésére -- az \algel tárgy. További keresőalgoritmusok a \mestersegesintelligencia tárgyban szerepelnek.

Olvasmányos, jól érthető összefoglalót ad az UML nyelvről Martin Fowler ,,UML distilled'' című könyve~\cite{fowler1997uml}.

A tulajdonsággráfokról egy jól érthető tudományos cikk Marko Rodriguez és Peter Neubauer munkája~\cite{Rodriguez2010}. Rodriguez a Titan elosztott gráfadatbázis-kezelő rendszer egyik fő fejlesztője~\cite{Titan}, míg Neubauer a Neo4j gráfadatbázis-kezelőt fejlesztő cég alapítója~\cite{Neo4j}. Az elosztott gráfadatbázis alkalmazását, elméleti és gyakorlati kihívásait kiváló prezentációkban mutatja be~\cite{RodriguezSlides2012,RodriguezSlides2013}.

Barabási-Albert László magyar fizikus nemzetközileg elismert kutatója a komplex \fogalomragozva{halozat}{hálózatok} elméletének. Barabási ,,Behálózva'' című könyve közérthető stílusban mutatja be a hálózatok elemzésének elméleti kihívásait a kutatási eredmények gyakorlati jelentőségét~\cite{behalozva}. A szerzővel több interjú is készült~\cite{barabasi1,barabasi2,barabasi3}.

%Az osztályok és prototípusok közötti elvi különbséget mutatja be Antero Taivalsaari, a Nokia Research fejlesztőjének 1996-os cikke~\cite{taivalsaari1996classes}.

%\roviditesangolulkifejtve{SQL}
%\fogalom{azonosito} (\fogalomragozva{elsodleges-kulcs}{elsődleges kulcsok})
